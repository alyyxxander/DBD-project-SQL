-- Active: 1679574137028@@151.161.91.21@3306@znb34_GamerDatabase

create or replace Table USER
(
    USER_ID             INTEGER(5),
    USER_LNAME          VARCHAR(15),
    USER_FNAME          VARCHAR(15),
    USER_PHONE          char(12),
    USER_EMAIL          char(25),
    USER_GAMERTAG       char(25),
    USER_GAMES_ID       INTEGER(5),
    USER_FRIENDS_ID     INTEGER(5),
    USER_BLOCKS_ID      INTEGER(5),
    CHAT_ID             INTEGER(5),

PRIMARY KEY (USER_ID),
FOREIGN KEY (USER_GAMES_ID) 
        REFERENCES USER (USER_ID)
    
)
;

INSERT
    INTO USER (`USER_ID`, `USER_LNAME`, `USER_FNAME`, `USER_PHONE`, `USER_EMAIL`,
     `USER_GAMERTAG`, `USER_GAMES_ID`, `USER_FRIENDS_ID`,`USER_BLOCKS_ID`, `CHAT_ID`)
    VALUES(12345, "Smith", "John", "814-555-6969", "smithjohn23@gmail.com", "johnsmith69420",13214,41244,62462,73754)
    ;

CREATE OR REPLACE TABLE USER_FRIENDS
(
    USER_FRIENDS_ID     INTEGER(5),
    USER_ID             INTEGER(5),

    PRIMARY KEY(USER_FRIENDS_ID),
        FOREIGN KEY(USER_ID) REFERENCES USER (USER_ID)
)
;
/* TABLE FOR GAME */
create or replace Table GAME
(
    GAME_ID         INTEGER(5),
    PLATFORM_ID     INTEGER(5),
    GAME_TITLE      char(25),
    GAME_GENRE      char(20),
    RELEASE_DATE    DATE,
    AVG_RATING      DECIMAL(2,1),

    PRIMARY KEY (GAME_ID),
        FOREIGN KEY (PLATFORM_ID) REFERENCES PLATFORM (PLATFORM_ID)
)
;

/* TABLE FOR PLATFORM */
create or replace TABLE PLATFORM
(
    PLATFORM_ID             INTEGER(5),
    USER_ID                 INTEGER(5),
    PLATFORM_GAMELIST_ID    INTEGER(5),

    PRIMARY KEY (PLATFORM_ID),
    FOREIGN KEY (USER_ID) REFERENCES USER (USER_ID)
)
;
/* TABLE FOR FORUM */
create or replace TABLE FORUM
(
    FORUM_ID        INTEGER(5),
    USER_ID         INTEGER(5),
    GAME_ID         INTEGER(5),
    PLATFORM_ID     INTEGER(5),
    DATE_POSTED     DATE,

    PRIMARY KEY (FORUM_ID),
    FOREIGN KEY (USER_ID) 
        REFERENCES USER (USER_ID)
    ,
    FOREIGN KEY (GAME_ID) 
        REFERENCES GAME (GAME_ID)
    ,
    FOREIGN KEY (PLATFORM_ID) 
        REFERENCES PLATFORM (PLATFORM_ID)
    
)
;
/* TABLE FOR THE BLOCKED USERS */
CREATE OR REPLACE TABLE USER_BLOCKS
(
    USER_BLOCKS_ID      INTEGER(5),
    USER_ID             INTEGER(5),

    PRIMARY KEY(USER_BLOCKS_ID),
    FOREIGN KEY(USER_ID) 
        REFERENCES USER(USER_ID)
)
;
CREATE OR REPLACE TABLE CHAT
(
    CHAT_ID             INTEGER(5),
    MESSAGE_ID          INTEGER(5),
    USER_ID             INTEGER(5),
    MESSAGE_CONTENT     char(255),

    PRIMARY KEY (CHAT_ID),
        FOREIGN KEY (USER_ID) REFERENCES USER (USER_ID)

)
;
CREATE OR REPLACE TABLE REVIEW
(
    REVIEW_ID           INTEGER(5),
    USER_ID             INTEGER(5),
    GAME_ID             INTEGER(5),
    RATING              DECIMAL(2,1),
    REVIEW_CONTENT      char(255),
    DATE_POSTED         DATE,

    PRIMARY KEY (REVIEW_ID),
        FOREIGN KEY (USER_ID) REFERENCES USER (USER_ID)

)
;
CREATE OR REPLACE TABLE POST
(
    USER_POST_ID    INTEGER(5),
    USER_ID         INTEGER(5),
    POST_CONTENT    char(255),

    PRIMARY KEY(USER_POST_ID),
    FOREIGN KEY(USER_ID)
        REFERENCES USER(USER_ID)

)
;